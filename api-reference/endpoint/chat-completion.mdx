---
title: 'Chat Completion'
openapi: 'POST /v1/chat/completions'
---

## Request Body

```json
{
  "model": "chatgpt-4o-latest",
  "messages": [
    {
      "role": "system",
      "content": "You are a helpful assistant."
    },
    {
      "role": "user",
      "content": "Please explain the concept of artificial intelligence."
    }
  ],
  "stream": true,
  "temperature": 0.7,
  "max_tokens": 1000,
  "top_p": 1,
  "frequency_penalty": 0,
  "presence_penalty": 0
}
```

## Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| model | string | Yes | The model to use for completion |
| messages | array | Yes | Array of message objects with role and content |
| stream | boolean | No | Whether to stream the response (default: false) |
| temperature | number | No | Controls randomness (0-2, default: 0.7) |
| max_tokens | integer | No | Maximum number of tokens to generate |
| top_p | number | No | Nucleus sampling parameter (0-1, default: 1) |
| frequency_penalty | number | No | Penalty for frequency of tokens (-2 to 2, default: 0) |
| presence_penalty | number | No | Penalty for presence of tokens (-2 to 2, default: 0) |

## Example Response

```json
{
  "id": "chatcmpl-123",
  "object": "chat.completion",
  "created": 1677652288,
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "Artificial intelligence (AI) is..."
      },
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 9,
    "completion_tokens": 12,
    "total_tokens": 21
  }
}
```

## Example Usage

```python
import requests
import json

BASE_URL = "https://nano-gpt.com/api/v1"
API_KEY = "YOUR_API_KEY"

headers = {
    "Authorization": f"Bearer {API_KEY}",
    "Content-Type": "application/json",
    "Accept": "text/event-stream"
}

def stream_chat_completion(messages, model="chatgpt-4o-latest"):
    data = {
        "model": model,
        "messages": messages,
        "stream": True
    }

    response = requests.post(
        f"{BASE_URL}/chat/completions",
        headers=headers,
        json=data,
        stream=True
    )

    if response.status_code != 200:
        raise Exception(f"Error: {response.status_code}")

    for line in response.iter_lines():
        if line:
            line = line.decode('utf-8')
            if line.startswith('data: '):
                line = line[6:]
            if line == '[DONE]':
                break
            try:
                chunk = json.loads(line)
                if chunk['choices'][0]['delta'].get('content'):
                    yield chunk['choices'][0]['delta']['content']
            except json.JSONDecodeError:
                continue 