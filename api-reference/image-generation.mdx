---
title: "Image Generation"
description: "Complete guide to image generation APIs"
---

## Overview

The NanoGPT API offers access to all the state-of-the-art image models. This guide covers how to use our image generation endpoint.

## OpenAI-Compatible Endpoint (v1/images/generations)

This endpoint follows the OpenAI specification for image generation and returns a list of base64-encoded images.

```bash
curl https://nano-gpt.com/v1/images/generations \
  -H "Authorization: Bearer $API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "hidream",
    "prompt": "A sunset over a mountain range",
    "n": 1,
    "size": "1024x1024"
  }'
```

## Image Generation

Here's a complete example using the Recraft model and our older API standard:

```python
import requests
import base64

API_KEY = "YOUR_API_KEY"
BASE_URL = "https://nano-gpt.com/api"

headers = {"x-api-key": API_KEY}

response = requests.post(
    f"{BASE_URL}/generate-image",
    headers=headers,
    json={
        "model": "recraft-v3",
        "prompt": "A serene mountain landscape at sunset",
        "width": 1024,
        "height": 1024
    }
)

result = response.json()
b64_data = result["data"][0]["b64_json"]

# Decode and save the image
image_bytes = base64.b64decode(b64_data)
with open("generated_image.png", "wb") as f:
    f.write(image_bytes)

# Display cost information
cost = result.get("cost", "N/A")
payment_source = result.get("paymentSource", "N/A")
remaining_balance = result.get("remainingBalance")

print(f"Image saved as generated_image.png")
print(f"Cost: {cost} {payment_source}")
if remaining_balance is not None:
    print(f"Remaining balance: {remaining_balance} {payment_source}")
else:
    print("Remaining balance: Not available")
```

## Parameters

The image generation API accepts the following parameters:

- `prompt` (string): The text description of the image you want to generate
- `model` (string): The model to use for generation
- `width` (integer): Width of the generated image (default: 1024)
- `height` (integer): Height of the generated image (default: 1024)
- `negative_prompt` (string): Things to avoid in the generated image
- `nImages` (integer): Number of images to generate (default: 1)
- `num_steps` (integer): Number of denoising steps (default: 30)
- `resolution` (string): Output resolution (default: "1024x1024")
- `sampler_name` (string): Sampling method (default: "DPM++ 2M Karras")
- `scale` (float): Guidance scale (default: 7.5)

## Best Practices

1. **Prompt Engineering**
   - Be specific and detailed in your prompts
   - Include style references when needed
   - Use the negative prompt to avoid unwanted elements

2. **Image Quality**
   - Higher resolution settings produce better quality but take longer
   - More steps generally mean better quality but slower generation
   - Adjust the guidance scale based on how closely you want to follow the prompt

3. **Cost Optimization**
   - Start with lower resolution for testing
   - Use fewer steps during development
   - Generate one image at a time unless multiple variations are needed

## Error Handling

The API may return various error codes:

- 400: Bad Request (invalid parameters)
- 401: Unauthorized (invalid API key)
- 429: Too Many Requests (rate limit exceeded)
- 500: Internal Server Error

Always implement proper error handling in your applications:

```python
try:
    result = generate_image(prompt)
except requests.exceptions.RequestException as e:
    if e.response:
        if e.response.status_code == 401:
            print("Invalid API key. Please check your credentials.")
        elif e.response.status_code == 429:
            print("Rate limit exceeded. Please wait before trying again.")
        else:
            print(f"API Error: {e.response.status_code}")
    else:
        print(f"Network Error: {str(e)}")
``` 